# 证件照处理工具设计

## 核心需求
智能化证件照/合规照片生成工具，支持学校、办公、签证等场景的严格格式要求。

## 技术栈
- Electron + Vue 3 + TypeScript
- Sharp（本地图片处理）+ Canvas API
- 阿里云 Qwen 视觉 API（AI 抠图、人脸检测）
- electron-store（数据存储）

## 核心功能
1. 场景模板库（护照、签证、身份证、学生证等）
2. AI 背景处理（抠图、背景替换、边缘优化）
3. 尺寸与格式规范（精确像素、DPI、比例裁剪）
4. 人脸与构图优化（居中、位置检测）
5. Windows 右键菜单集成

## 架构设计
```
src/
├── main/           # Electron 主进程
├── renderer/       # Vue 3 UI
├── services/       # AI调用、图片处理
├── templates/      # 场景模板配置
└── utils/          # 工具函数
```

## 处理流程
上传/右键打开 → AI抠图 → 背景替换 → 人脸定位 → 尺寸调整 → 导出

## 数据存储
- 用户设置：API密钥、默认模板、输出路径
- 场景模板：JSON配置（尺寸、背景色、DPI、人脸位置）
- 处理历史：文件路径、模板、时间

## 错误处理
- API失败：重试机制、降级到手动模式
- 图片质量问题：警告提示、自动调整
- 文件操作：自动创建目录、处理冲突
